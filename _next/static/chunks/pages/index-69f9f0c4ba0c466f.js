(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4297)}])},4297:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return pages}});var l=n(5893),s=n(7294),r=n(4596),utils_useOutboundClickListener=e=>{let handleOutboundClick=t=>{let findLinkElement=e=>e instanceof HTMLAnchorElement&&e.href?e:e instanceof HTMLElement&&e.parentElement?findLinkElement(e.parentElement):null,n=findLinkElement(t.target);if(!(n instanceof HTMLAnchorElement))return;let{href:l}=n;l.match(RegExp(`^(http://www.|https://www.|http://|https://)+(${window.location.hostname})`))||e.trackLink({href:l})};(0,s.useEffect)(()=>(window.document.addEventListener("click",handleOutboundClick,{capture:!0}),()=>window.document.removeEventListener("click",handleOutboundClick,{capture:!0})),[])},es_useMatomo=function(){let e=(0,s.useContext)(r.Z),t=(0,s.useCallback)(t=>null==e?void 0:e.trackPageView(t),[e]),n=(0,s.useCallback)(t=>null==e?void 0:e.trackEvent(t),[e]),l=(0,s.useCallback)(()=>null==e?void 0:e.trackEvents(),[e]),a=(0,s.useCallback)(t=>null==e?void 0:e.trackSiteSearch(t),[e]),i=(0,s.useCallback)(t=>null==e?void 0:e.trackLink(t),[e]),o=(0,s.useCallback)(()=>{e&&utils_useOutboundClickListener(e)},[e]),c=(0,s.useCallback)((t,...n)=>{null==e||e.pushInstruction(t,...n)},[e]);return{trackEvent:n,trackEvents:l,trackPageView:t,trackSiteSearch:a,trackLink:i,enableLinkTracking:o,pushInstruction:c}},a=n(9008),i=n.n(a),o=n(3769),ps1_Ps1=()=>{let[e,t]=(0,s.useState)(""),{theme:n}=(0,o.F)();return(0,s.useEffect)(()=>{t("hao")},[]),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{style:{color:n.yellow},children:"guest"}),(0,l.jsx)("span",{style:{color:n.white},children:"@"}),(0,l.jsx)("span",{style:{color:n.green},children:e}),(0,l.jsx)("span",{style:{color:n.white},children:":$ ~"})]})},history_History=e=>{let{history:t}=e;return(0,l.jsx)(l.Fragment,{children:t.map((e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,l.jsx)("div",{className:"flex-shrink",children:(0,l.jsx)(ps1_Ps1,{})}),(0,l.jsx)("div",{className:"flex-grow",children:e.command})]}),(0,l.jsx)("p",{className:"whitespace-pre-wrap mb-2",style:{lineHeight:"normal"},dangerouslySetInnerHTML:{__html:e.output}})]},e.command+t))})},c=n(1217);let commandExists=e=>{let t=["clear",...Object.keys(c)];return -1!==t.indexOf(e.split(" ")[0])};var u=n(4350);let handleTabCompletion=(e,t)=>{let n=Object.keys(c).filter(t=>t.startsWith(e));1===n.length&&t(n[0])},handleDynamicChoice=(e,t,n)=>{let l=e.split("\n");t>l.length-1&&(t=0);let s=/style="(.*?)"/gm;return[(l=(l=l.map(e=>e.replace(/<span >/g,"").replace(/<span>/g,"").replace(/<\/span>/g,"").replace(s,""))).map((e,l)=>l===t?'<span style="background: '.concat(n.foreground,"; color: ").concat(n.background,'">').concat(e,"</span>"):"<span>".concat(e,"</span>"))).join("\n"),++t]};var live_Live=e=>{let{history:t}=e;return t?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"whitespace-pre-wrap mb-2",style:{lineHeight:"normal"},dangerouslySetInnerHTML:{__html:t.output}})})}):null},input_Input=e=>{let{inputRef:t,containerRef:n}=e,{trackEvent:r}=es_useMatomo(),{theme:a}=(0,o.F)(),[i,d]=(0,s.useState)(""),[p,h]=(0,s.useState)(0),{setCommand:f,setDynamicCommand:m,setDynamicHistory:x,history:g,dynamicHistory:k,lastCommandIndex:v,setLastCommandIndex:w,clearHistory:y,clearDynamicHistory:b}=(0,u.S)();(0,s.useEffect)(()=>{n.current.scrollTo(0,n.current.scrollHeight)},[g,k]),(0,s.useEffect)(()=>{""===i&&b()},[i]);let handleChange=async e=>{m(e.target.value),d(e.target.value)},onSubmit=async e=>{let t=g.map(e=>{let{command:t}=e;return t}).filter(e=>e);if("c"===e.key&&e.ctrlKey)e.preventDefault(),d(""),m(""),b();else if("l"===e.key&&e.ctrlKey)e.preventDefault(),y(),b();else if("Tab"===e.key){if(e.preventDefault(),handleTabCompletion(i,d),null!==k){let e=handleDynamicChoice(k.output,p,a);x(e[0]),h(e[1])}}else if("Enter"===e.key||"13"===e.code){if(e.preventDefault(),null!==k&&"search"===i.split(" ")[0]&&0!==p){let e=k.output.split("\n"),t=RegExp("(?<=<a.*>)[^<]*(?=<\\/a>)");await (0,c.search)(e[p-1].match(t)[0].split(" "))}w(0),f(i),m(""),d(""),h(0),r({category:"Command Executed",action:i||"no command"})}else if("ArrowUp"===e.key){if(e.preventDefault(),!t.length)return;let n=v+1;n<=t.length&&(w(n),d(t[t.length-n]))}else if("ArrowDown"===e.key){if(e.preventDefault(),!t.length)return;let n=v-1;n>0?(w(n),d(t[t.length-n])):(w(0),d(""))}else h(0)};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,l.jsx)("label",{htmlFor:"prompt",className:"flex-shrink",children:(0,l.jsx)(ps1_Ps1,{})}),(0,l.jsx)("input",{ref:t,id:"prompt",type:"text",className:"focus:outline-none flex-grow","aria-label":"prompt",style:{backgroundColor:a.background,color:commandExists(i)||""===i?a.green:a.red},value:i,onChange:e=>handleChange(e),autoFocus:!0,onKeyDown:onSubmit,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"})]}),(0,l.jsx)(live_Live,{history:k})]})},d=n(1181),pages=e=>{let{inputRef:t}=e,{trackPageView:n}=es_useMatomo(),{history:r}=(0,u.S)(),{theme:a}=(0,o.F)(),c=s.useRef(null);return s.useEffect(()=>{n({})},[]),s.useEffect(()=>{t.current&&t.current.focus()},[r]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i(),{children:(0,l.jsx)("title",{children:"terminal"})}),(0,l.jsx)("div",{className:"overflow-hidden h-full rounded",style:{borderColor:a.yellow,padding:d.Cg?16:8,borderWidth:d.Cg?2:0},children:(0,l.jsxs)("div",{ref:c,className:"overflow-y-auto h-full",children:[(0,l.jsx)(history_History,{history:r}),(0,l.jsx)(input_Input,{inputRef:t,containerRef:c})]})})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);